!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).IMAGINARY||(t.IMAGINARY={})).ContentSliderAnnouncer=e()}}(function(){return function s(o,l,a){function u(t,e){if(!l[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(h)return h(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=l[t]={exports:{}};o[t][0].call(r.exports,function(e){return u(o[t][1][e]||e)},r,r.exports,s,o,l,a)}return l[t].exports}for(var h="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(f,i,n){(function(t){!function(e){"object"==typeof n&&void 0!==i?i.exports=e():("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).Durden=e()}(function(){return function s(o,l,a){function u(t,e){if(!l[t]){if(!o[t]){var i="function"==typeof f&&f;if(!e&&i)return i(t,!0);if(h)return h(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=l[t]={exports:{}};o[t][0].call(r.exports,function(e){return u(o[t][1][e]||e)},r,r.exports,s,o,l,a)}return l[t].exports}for(var h="function"==typeof f&&f,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,i){"use strict";var n,r=(n=e("./tiling"))&&n.__esModule?n:{default:n};function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o,l,a=(l=[{key:"shuffle",value:function(e){for(var t=e.length;0!==t;){var i=Math.floor(Math.random()*t),n=e[t-=1];e[t]=e[i],e[i]=n}return e}},{key:"setTileVisibilityAnimated",value:function(n,r,e){var s=0;return new TWEEN.Tween({last:0}).to({last:n.length-1},e).easing(TWEEN.Easing.Cubic.In).onUpdate(function(e){for(var t=Math.floor(e.last),i=s;i<=t;i+=1)n[i].setVisibility(r);s=t}).start()}}],s((o=u).prototype,[{key:"getShuffledTiles",value:function(){return u.shuffle(this.tiling.getAllTiles())}},{key:"getShuffledSuperTiles",value:function(){return u.shuffle(this.tiling.getAllSuperTiles())}},{key:"showTilesRandom",value:function(e){return u.setTileVisibilityAnimated(this.getShuffledTiles(),!0,e)}},{key:"showSuperTilesRandom",value:function(e){return u.setTileVisibilityAnimated(this.getShuffledSuperTiles(),!0,e)}},{key:"hideTilesRandom",value:function(e){return u.setTileVisibilityAnimated(this.getShuffledTiles(),!1,e)}},{key:"hideSuperTilesRandom",value:function(e){return u.setTileVisibilityAnimated(this.getShuffledSuperTiles(),!1,e)}},{key:"showTilesOrdered",value:function(e){return u.setTileVisibilityAnimated(this.tiling.getAllTiles(),!0,e)}},{key:"hideTilesOrdered",value:function(e){return u.setTileVisibilityAnimated(this.tiling.getAllTiles(),!1,e)}},{key:"showSuperTilesOrdered",value:function(e){return u.setTileVisibilityAnimated(this.tiling.getAllSuperTiles(),!0,e)}},{key:"hideSuperTilesOrdered",value:function(e){return u.setTileVisibilityAnimated(this.tiling.getAllSuperTiles(),!1,e)}},{key:"setTileVisibility",value:function(t){this.tiling.getAllTiles().forEach(function(e){e.path.opacity=t?1:0})}},{key:"getBounds",value:function(){var e=this.tiling.superTiles[0][0].group.bounds.center,t=this.tiling.superTiles[0][this.tiling.m-1].group.bounds.center,i=this.tiling.superTiles[this.tiling.n-1][0].group.bounds.center,n=this.tiling.superTiles[this.tiling.n-1][this.tiling.m-1].group.bounds.center,r=Math.min(e.x,i.x),s=Math.max(t.x,n.x),o=Math.min(e.y,t.y,i.y,n.y),l=Math.max(e.y,t.y,i.y,n.y);return new paper.Rectangle({from:new paper.Point(r,o),to:new paper.Point(s,l)})}},{key:"transformTilesAnimated",value:function(e,t,i,n){var r=this,s=1<arguments.length&&void 0!==t?t:u.MIN_ANGLE,o=2<arguments.length&&void 0!==i?i:u.MAX_ANGLE,l=3<arguments.length&&void 0!==n&&n;return new TWEEN.Tween({angle:s}).to({angle:o},e).easing(TWEEN.Easing.Sinusoidal.InOut).onUpdate(function(e){r.transformTiles(r.bcdeLen,e.angle,l)}).repeat(1/0).yoyo(!0).start()}},{key:"transformTiles",value:function(e,t,i){var n=2<arguments.length&&void 0!==i&&i;this.tiling.transform(e,t);var r=this.getBounds();n&&(paper.view.getViewSize().width>r.width||(paper.view.getViewSize().height,r.height),paper.view.setScaling(Math.max(paper.view.getViewSize().width/r.width,paper.view.getViewSize().height/r.height))),paper.view.setCenter(r.getCenter())}},{key:"setStroke",value:function(t,i){this.tiling.getAllTiles().forEach(function(e){e.setStroke(t,i)})}},{key:"colorSuperTilesRandom",value:function(i){this.tiling.getAllSuperTiles().forEach(function(e){var t=i[Math.floor(Math.random()*i.length)];e.tile1.path.fillColor=t,e.tile2.path.fillColor=t,e.tile3.path.fillColor=t,e.tile4.path.fillColor=t})}},{key:"colorTilesRandom",value:function(t){this.tiling.getAllTiles().forEach(function(e){e.path.fillColor=t[Math.floor(Math.random()*t.length)]})}},{key:"colorTilesPeriodic",value:function(i){this.tiling.getAllTiles().forEach(function(e,t){e.path.fillColor=i[t%i.length]})}},{key:"colorSuperTilesPeriodic",value:function(i){this.tiling.getAllTiles().forEach(function(e,t){e.path.fillColor=i[Math.floor(t/4)%i.length]})}}]),s(o,l),u);function u(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:u.MAX_ANGLE;!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.canvas=window.document.createElement("canvas"),e.appendChild(this.canvas),paper.setup(this.canvas),paper.view.applyMatrix=!1,this.tiling=new r.default(t,i),this.bcdeLen=50,this.transformTiles(this.bcdeLen,n,!0),paper.view.update(),paper.view.on("frame",function(){TWEEN.update()})}a.MAX_ANGLE=r.default.MAX_B,a.MIN_ANGLE=r.default.MIN_B,a.Themes={RGB:["#ff9999","#99ff99","#9999ff","#ff99ff"],Spring:["#54678C","#9BDAF2","#F2C12E","#F2E1C2","#D95252"],Flowers:["#D95B96","#BABF1B","#D9981E","#D9751E","#8C1616"],Autumn:["#A62447","#D9326F","#525F43","#6C2A35","#D9936A"],Winter:["#0B0340","#263973","#495F8C","#A0CCF2","#514071"],Christmas:["#F2293A","#F24464","#678C5D","#730202","#BFBFBD"]},t.exports={Durden:a,Themes:a.Themes,MIN_ANGLE:a.MIN_ANGLE,MAX_ANGLE:a.MAX_ANGLE}},{"./tiling":4}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,r=(n=e("./tile"))&&n.__esModule?n:{default:n};function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=(s(l.prototype,[{key:"transform",value:function(e,t){this.tile1.transform(e,t),this.tile2.copyShape(this.tile1,!1),this.tile3.copyShape(this.tile1,!1),this.tile4.copyShape(this.tile1,!1),this.tile2.path.rotate(this.tile1.vE.subtract(this.tile1.vA).getAngle()-this.tile2.vE.subtract(this.tile2.vA).getAngle()),this.tile2.path.translate(this.tile1.vA.subtract(this.tile2.vA)),this.tile3.path.rotate(this.tile1.vE.subtract(this.tile1.vD).getAngle()-this.tile3.vD.subtract(this.tile3.vC).getAngle()),this.tile3.path.translate(this.tile1.vE.subtract(this.tile3.vD)),this.tile4.path.rotate(this.tile3.vE.subtract(this.tile3.vA).getAngle()-this.tile4.vE.subtract(this.tile4.vA).getAngle()),this.tile4.path.translate(this.tile3.vA.subtract(this.tile4.vA))}},{key:"setVisibility",value:function(e){this.tile1.setVisibility(e),this.tile2.setVisibility(e),this.tile3.setVisibility(e),this.tile4.setVisibility(e)}},{key:"copyShape",value:function(e){this.tile1.copyShape(e.tile1),this.tile2.copyShape(e.tile2),this.tile3.copyShape(e.tile3),this.tile4.copyShape(e.tile4)}},{key:"north",get:function(){return this.group.localToParent(this.tile1.vA)}},{key:"nne",get:function(){return this.group.localToParent(this.tile1.vB)}},{key:"nee",get:function(){return this.group.localToParent(this.tile1.vC)}},{key:"south",get:function(){return this.group.localToParent(this.tile3.vA)}},{key:"se",get:function(){return this.group.localToParent(this.tile3.vB)}},{key:"ssw",get:function(){return this.group.localToParent(this.tile4.vB)}},{key:"sww",get:function(){return this.group.localToParent(this.tile4.vC)}},{key:"east",get:function(){return this.group.localToParent(this.tile1.vD)}},{key:"west",get:function(){return this.group.localToParent(this.tile2.vC)}},{key:"nw",get:function(){return this.group.localToParent(this.tile2.vB)}}]),l);function l(){!function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this),this.tile1=new r.default("#ff9999",!1,!1),this.tile2=new r.default("#99ff99",!0,!1),this.tile3=new r.default("#9999ff",!1,!0),this.tile4=new r.default("#ff99ff",!0,!0),this.group=new paper.Group([this.tile1.path,this.tile2.path,this.tile3.path,this.tile4.path]),this.group.applyMatrix=!1}i.default=o},{"./tile":3}],3:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=(n(s.prototype,[{key:"transform",value:function(t,e){var i=this.path.segments,n=360-2*e,r=(180-e)/2,s=2*Math.sin(e/2*Math.PI/180),o=Math.sqrt(s*s+4-2*s*2*Math.cos((n-r)*Math.PI/180)),l=[0,e,n,2*Math.asin(Math.sin((n-r)*Math.PI/180)/o*s)*180/Math.PI],a=0;[1,2,3,4].forEach(function(e){a+=180-l[e-1],i[e].point.set(i[e-1].point.add(new paper.Point({length:t,angle:a})))})}},{key:"setStroke",value:function(e,t){this.path.strokeWidth=e,this.path.strokeColor=t}},{key:"setColor",value:function(e){this.path.fillColor=e}},{key:"setVisibility",value:function(e){this.path.opacity=e?1:0}},{key:"copyShape",value:function(e,t){for(var i=!(1<arguments.length&&void 0!==t)||t,n=1;n<=4;n+=1)this.path.segments[n].point.set(e.path.segments[n].point);i&&this.path.setMatrix(e.path.getMatrix())}},{key:"vA",get:function(){return this.path.localToParent(this.path.segments[0].point)}},{key:"vB",get:function(){return this.path.localToParent(this.path.segments[1].point)}},{key:"vC",get:function(){return this.path.localToParent(this.path.segments[2].point)}},{key:"vD",get:function(){return this.path.localToParent(this.path.segments[3].point)}},{key:"vE",get:function(){return this.path.localToParent(this.path.segments[4].point)}}]),s);function s(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.path=new paper.Path,this.path.closed=!0,this.path.applyMatrix=!1,this.path.scale(t?-1:1,i?-1:1),this.path.fillColor=e,this.path.strokeColor="#999999",this.path.strokeWidth=1;for(var n=0;n<5;n+=1)this.path.add(new paper.Point(0,0))}i.default=r},{}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,r=(n=e("./supertile"))&&n.__esModule?n:{default:n};function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o,l,a=(l=[{key:"createMatrix",value:function(e,t){for(var i=[],n=0;n<e;n+=1){for(var r=[],s=0;s<t;s+=1)r.push([]);i.push(r)}return i}}],s((o=u).prototype,[{key:"transform",value:function(e,t){var i=this.superTiles[0][0];i.transform(e,t);var n=180-i.tile4.vB.subtract(i.tile1.vC).getAngle(),r=t+i.tile2.vB.subtract(i.tile2.vA).getAngle();this.superTiles[0][0].group.rotation=n;for(var s=0;s<this.n;s+=1)for(var o=0;o<this.m;o+=1)if(0!==s||0!==o){this.superTiles[s][o].copyShape(i),this.superTiles[s][o].group.rotation=o%2==1?n+r:n;var l=[];0<s&&(o%2==1?l.push(this.superTiles[s-1][o].sww.subtract(this.superTiles[s][o].nne)):l.push(this.superTiles[s-1][o].nne.subtract(this.superTiles[s][o].sww))),0<o&&l.push(this.superTiles[s][o-1].south.subtract(this.superTiles[s][o].west)),1===l.length&&this.superTiles[s][o].group.translate(l[0]),2===l.length&&this.superTiles[s][o].group.translate(l[0].add(l[1]).multiply(.5))}}},{key:"getAllTiles",value:function(){var t=[];return this.superTiles.forEach(function(e){e.forEach(function(e){t.push(e.tile1),t.push(e.tile2),t.push(e.tile3),t.push(e.tile4)})}),t}},{key:"getAllSuperTiles",value:function(){var t=[];return this.superTiles.forEach(function(e){e.forEach(function(e){t.push(e)})}),t}}]),s(o,l),u);function u(e,t){!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.n=e,this.m=t,this.superTiles=u.createMatrix(this.n,this.m);for(var i=0;i<this.n;i+=1)for(var n=0;n<this.m;n+=1)this.superTiles[i][n]=new r.default,n%2==1&&this.superTiles[i][n].group.scale(1,-1)}(i.default=a).MIN_B=74,a.MAX_B=156},{"./supertile":2}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(f,i,n){(function(t){!function(e){"object"==typeof n&&void 0!==i?i.exports=e():("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).TextPoster=e()}(function(){return function s(o,l,a){function u(t,e){if(!l[t]){if(!o[t]){var i="function"==typeof f&&f;if(!e&&i)return i(t,!0);if(h)return h(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=l[t]={exports:{}};o[t][0].call(r.exports,function(e){return u(o[t][1][e]||e)},r,r.exports,s,o,l,a)}return l[t].exports}for(var h="function"==typeof f&&f,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,i){"use strict";t.exports={render:function(a,e){for(var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=Object.assign({},{maxLineHeight:.2,minLineHeight:.044,lineSpacing:0},t),u=i.maxLineHeight,h=i.minLineHeight,f=i.lineSpacing;a.firstChild;)a.removeChild(a.firstChild);var c=document.createElement("div");c.classList.add("line-container"),a.append(c);var p=0;e.split("\n").filter(function(e){return 0<e.length}).forEach(function(e){var t=e,i=!1;if("@@"===e.trim().substr(0,2)&&(t=e.trim().substr(2).trim(),i=!0),0<t.length)for(var n=t.split(" "),r=0,s=0;r<n.length;){var o=document.createElement("div");o.classList.add("line"),c.append(o);for(var l=1;s+=1,o.textContent=n.slice(r,s).join(" "),l=a.clientWidth/o.clientWidth,s<=n.length&&o.clientHeight*l/a.clientHeight>=h;);s<=n.length&&r+1<s&&(s-=1),o.textContent=n.slice(r,s).join(" "),l=i?Math.min(a.clientWidth/o.clientWidth,h*a.clientHeight/o.clientHeight):Math.min(a.clientWidth/o.clientWidth,u*a.clientHeight/o.clientHeight),o.style.left="".concat((a.clientWidth-o.clientWidth*l)/2,"px"),o.style.transform="scale(".concat(l,")"),o.style.top="".concat(p,"px"),p+=o.clientHeight*l+f,r=s}}),c.style.top="".concat((a.clientHeight-p)/2,"px")}}},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,i){var a=Object.create||function(e){function t(){}return t.prototype=e,new t},o=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return i},s=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=a(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0;var r,l=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,"x",{value:0}),r=0===u.x}catch(e){r=!1}function h(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function f(e,t,i,n){var r,s,o;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),s=e._events),o=s[t]):(s=e._events=a(null),e._eventsCount=0),o){if("function"==typeof o?o=s[t]=n?[i,o]:[o,i]:n?o.unshift(i):o.push(i),!o.warned&&(r=h(e))&&0<r&&o.length>r){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",l.name,l.message)}}else o=s[t]=i,++e._eventsCount;return e}function c(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},r=s.call(c,n);return r.listener=i,n.wrapFn=r}function d(e,t,i){var n=e._events;if(!n)return[];var r=n[t];return r?"function"==typeof r?i?[r.listener||r]:[r]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(r):g(r,r.length):[]}function v(e){var t=this._events;if(t){var i=t[e];if("function"==typeof i)return 1;if(i)return i.length}return 0}function g(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}r?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');l=e}}):n.defaultMaxListeners=l,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return h(this)},n.prototype.emit=function(e,t,i,n){var r,s,o,l,a,u,h="error"===e;if(u=this._events)h=h&&null==u.error;else if(!h)return!1;if(h){if(1<arguments.length&&(r=t),r instanceof Error)throw r;var f=new Error('Unhandled "error" event. ('+r+")");throw f.context=r,f}if(!(s=u[e]))return!1;var c="function"==typeof s;switch(o=arguments.length){case 1:!function(e,t,i){if(t)e.call(i);else for(var n=e.length,r=g(e,n),s=0;s<n;++s)r[s].call(i)}(s,c,this);break;case 2:!function(e,t,i,n){if(t)e.call(i,n);else for(var r=e.length,s=g(e,r),o=0;o<r;++o)s[o].call(i,n)}(s,c,this,t);break;case 3:!function(e,t,i,n,r){if(t)e.call(i,n,r);else for(var s=e.length,o=g(e,s),l=0;l<s;++l)o[l].call(i,n,r)}(s,c,this,t,i);break;case 4:!function(e,t,i,n,r,s){if(t)e.call(i,n,r,s);else for(var o=e.length,l=g(e,o),a=0;a<o;++a)l[a].call(i,n,r,s)}(s,c,this,t,i,n);break;default:for(l=new Array(o-1),a=1;a<o;a++)l[a-1]=arguments[a];!function(e,t,i,n){if(t)e.apply(i,n);else for(var r=e.length,s=g(e,r),o=0;o<r;++o)s[o].apply(i,n)}(s,c,this,l)}return!0},n.prototype.on=n.prototype.addListener=function(e,t){return f(this,e,t,!1)},n.prototype.prependListener=function(e,t){return f(this,e,t,!0)},n.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,p(this,e,t)),this},n.prototype.removeListener=function(e,t){var i,n,r,s,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=a(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,s=i.length-1;0<=s;s--)if(i[s]===t||i[s].listener===t){o=i[s].listener,r=s;break}if(r<0)return this;0===r?i.shift():function(e,t){for(var i=t,n=i+1,r=e.length;n<r;i+=1,n+=1)e[i]=e[n];e.pop()}(i,r),1===i.length&&(n[e]=i[0]),n.removeListener&&this.emit("removeListener",e,o||t)}return this},n.prototype.removeAllListeners=function(e){var t,i,n;if(!(i=this._events))return this;if(!i.removeListener)return 0===arguments.length?(this._events=a(null),this._eventsCount=0):i[e]&&(0==--this._eventsCount?this._events=a(null):delete i[e]),this;if(0===arguments.length){var r,s=o(i);for(n=0;n<s.length;++n)"removeListener"!==(r=s[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=a(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(t)for(n=t.length-1;0<=n;n--)this.removeListener(e,t[n]);return this},n.prototype.listeners=function(e){return d(this,e,!0)},n.prototype.rawListeners=function(e){return d(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},n.prototype.listenerCount=v,n.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,r=(n=e("events"))&&n.__esModule?n:{default:n};function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.busy=!1,this.visible=!1,this.wrapper=null,this.iframe=null,this.hideTimeout=null,this.events=new r.default}return function(e,t,i){t&&s(e.prototype,t),i&&s(e,i)}(t,[{key:"show",value:function(r,s,e){var o=this,l=2<arguments.length&&void 0!==e?e:{};return new Promise(function(e,t){(o.busy||o.visible)&&t(new Error("Announcement already in progress.")),o.busy=!0;var i=Object.assign({},{duration:6e4},l);o.visible=!0,o.wrapper=window.document.createElement("div"),o.wrapper.classList.add("content-slider-announcer-wrapper"),o.iframe=window.document.createElement("iframe"),o.iframe.setAttribute("src",r),o.iframe.setAttribute("allowtransparency","true"),o.iframe.addEventListener("load",function(){o.iframe.contentWindow.postMessage({type:"announce",text:s,options:l})});var n=window.document.createElement("div");n.classList.add("content-slider-announcer-eventMask"),n.addEventListener("pointerdown",function(){o.hide()}),o.wrapper.append(o.iframe),o.wrapper.append(n),window.document.querySelector("body").append(o.wrapper),o.hideTimeout=setTimeout(function(){o.hide(),o.clearTimeoutTimer()},i.duration),o.events.once("close",function(){e()}),o.busy=!1})}},{key:"hide",value:function(){var e=this;!this.busy&&this.visible&&(this.busy=!0,this.iframe.contentWindow.postMessage({type:"hide",duration:t.HIDE_DELAY}),setTimeout(function(){e.destroyFrame(),e.busy=!1},t.HIDE_DELAY))}},{key:"hideNow",value:function(){!this.busy&&this.visible&&(this.busy=!0,this.destroyFrame(),this.busy=!1)}},{key:"destroyFrame",value:function(){this.clearTimeoutTimer(),this.wrapper.remove(),this.wrapper=null,this.iframe=null,this.visible=!1,this.events.emit("close")}},{key:"clearTimeoutTimer",value:function(){null!==this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}}]),t}();(i.default=o).HIDE_DELAY=2e3},{events:3}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var l=n(e("@imaginary-maths/durden")),a=n(e("@imaginary-maths/text-poster"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.container=window.document.createElement("div"),this.container.classList.add("content-slider-announcement"),window.document.querySelector("body").append(this.container),this.bgContainer=window.document.createElement("div"),this.bgContainer.classList.add("content-slider-announcement-bg"),this.container.append(this.bgContainer),this.txtContainer=window.document.createElement("div"),this.txtContainer.classList.add("content-slider-announcement-txt"),this.container.append(this.txtContainer),this.tiler=null,this.runningTween=null}return function(e,t,i){t&&r(e.prototype,t),i&&r(e,i)}(o,[{key:"announce",value:function(e,t){var i=this,n=1<arguments.length&&void 0!==t?t:{},r={tilesAcross:8,tilesVertically:20,startAngle:150,endAngle:l.default.MIN_ANGLE,fadeInDuration:5e3,transformLoopDuration:3e4,strokeWidth:1,strokeColor:"#000000",themes:[]},s=Object.assign({},r,n);this.tiler=new l.default.Durden(this.bgContainer,s.tilesAcross,s.tilesVertically,s.startAngle),this.tiler.setStroke(s.strokeWidth,s.strokeColor),this.tiler.colorTilesPeriodic(o.DEFAULT_COLORS),this.selectTheme(s),this.tiler.setTileVisibility(!1),this.runningTween=this.tiler.showTilesRandom(s.fadeInDuration).onComplete(function(){i.runningTween=i.tiler.transformTilesAnimated(s.transformLoopDuration,s.startAngle,s.endAngle,!0),a.default.render(i.txtContainer,e),setTimeout(function(){i.txtContainer.classList.add("visible")},0)})}},{key:"selectTheme",value:function(e){var t=e.themes;if(0<t.length){var i=t[Math.floor(Math.random()*t.length)],n=e["theme_".concat(i)];n&&n.mode&&n.colors instanceof Array&&("random-supertile"===n.mode?this.tiler.colorSuperTilesRandom(n.colors):"periodic-supertile"===n.mode?this.tiler.colorSuperTilesPeriodic(n.colors):"periodic"===n.mode?this.tiler.colorTilesPeriodic(n.colors):this.tiler.colorTilesRandom(n.colors))}}},{key:"hide",value:function(e){var t=0<arguments.length&&void 0!==e?e:2e3;null!=this.runningTween&&this.runningTween.stop(),this.txtContainer.classList.remove("visible"),this.runningTween=this.tiler.hideSuperTilesOrdered(t)}}]),o}();(i.default=s).DEFAULT_COLORS=["#BF1736","#0D1440","#1438A6","#0E2773"]},{"@imaginary-maths/durden":1,"@imaginary-maths/text-poster":2}],6:[function(e,t,i){"use strict";var n=s(e("./announcer")),r=s(e("./announcer-frame"));function s(e){return e&&e.__esModule?e:{default:e}}var o=null;t.exports={initFrame:function(){var o=new n.default;window.addEventListener("message",function(e){var t=e.data.type;if("announce"===t){var i=e.data,n=i.text,r=i.options;o.announce(n,r)}else if("hide"===t){var s=e.data.duration;o.hide(s)}},!1)},createAnnouncement:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return null===o&&(o=new r.default),o.show(e,t,i)},hideAnnouncement:function(){null!==o&&o.hide()},hideAnnouncementNow:function(){null!==o&&o.hideNow()}}},{"./announcer":5,"./announcer-frame":4}]},{},[6])(6)});
//# sourceMappingURL=content-slider-announcer.min.js.map
